{%extends "base.html"%}
{%block content%}

  <form action="/payment_summary" method="POST">
    <input type="hidden" name="csrf_token" value="{{ csrf_token() }}">
 <div class="row justify-content-around" style="margin-top:24px">
  <input type="radio" class="inpcard inpcardN" id="normal" name="ticketType" value="NORMAL" checked="checked">
  <div class="card card3 text-white bg-dark mb-3  col  col-xxl-4 col-12 " style=""><label for="normal">
      <div class="card-header bg-success mt-2 text-dark fw-bold text-center"><label for="one">Normal</div>
      <div class="card-body">
          <h5 class="card-title">1 Miesiąc</h5>
          <p class="card-text">Pakiet NORMAL polecamy osobom, które chcą chcą rozpocząć swoją przygodę z treningiem, lub chcą narazie poprostu przetestować nasz sprzęt i infrastrukturę. Przez ten czas będziesz miał okazję przypatrzeć się jak działamy, a możliwe ze będziesz chciał zostać z nami na dłużej. </p>
      </div>
    </label>
    <p class="mt-auto text-center text-success n fw-bold h4 mb-4">Cena: {{normal}} zł</p>
  </div>

  <input type="radio" class="inpcard inpcardP" id="pro" name="ticketType" value="PRO">
  <div class="card card3 text-white bg-dark mb-3 col   col-xxl-4 col-12 " style=""><label for="pro">
      <div class="card-header bg-warning mt-2 text-dark fw-bold text-center">Pro</div>
      <div class="card-body">
          <h5 class="card-title">3 Miesiące</h5>
          <p class="card-text">Pakiet PRO przeznaczony jest dla osób zdecydowanych na dłuższą przygodę z treningiem. Trzy miesiące poza zaznajomieniem się z infrastrukturą i sprzętem pozwolą na wprowadzenie w życie konkretnego planu treningowego, a nasi trenerzy personalni mogą pomóc w jego zaplanowaniu i wdrożeniu w życie, dbając przy tym o poprawnośćwykonywanych ćwiczeń</p>
      </div>
    </label>
    <p class="mt-auto text-center text-warning fw-bold h4 mb-4">Cena: {{pro}} zł</p>
  </div>

  <input type="radio" class="inpcard inpcardM" id="max" name="ticketType" value="MAX">
  <div class="card card3 text-white bg-dark mb-3 col   col-xxl-4 col-12 " style=""><label for="max">
      <div class="card-header bg-danger mt-2 text-dark fw-bold text-center">Max</div>
      <div class="card-body">
          <h5 class="card-title">6 Miesięcy</h5>
          <p class="card-text">Pakiet MAX to ocpja dla tych najbardziej zdecydowanych, którzy poprostu chcą cieszyć się możliwością chodzenia na treningi nie martwiąc się co chwilę o odnawianie karnetu. 6 miesięcy ważności karnetu pozwala zaoszczędzić nie tylko czas na jego odnawianie, ale także pieniądze, ponieważ w przeliczeniu na miesiąć daje najlepszą ofertę cenową! </p>
          
      </div>
    </label>
    <p class="mt-auto text-center text-danger fw-bold h4 mb-4">Cena: {{max}} zł</p>
  </div>
</div>
<div class="text-center mx-auto bg-dark card mb-5 mt-5" style="max-width: 400px;opacity:0.95;">
  <!-- <button type="submit" value="Zapłać">dasda</button> -->
  {%if 'login' in session%}
  <button type="submit" class="btn btn-primary p-3">Podaj datę aktywacji karnetu i przejdź do płatności</button>
  {%else%}
  <button  class="btn btn-primary p-3 zalogujBtn" >Zajoguj się aby wykupić karnet</button>
  {%endif%}
  <input type="date" id="inputDate" name="inputDate" class="bg-dark border-0 text-light p-3" required>
  <input type="string" id="inputEndDate" name="inputEndDate" style="display:none;">
  
<div id="outputDate" class="text-light p-3">Wybierz datę i rodzaj karnetu.</div>

</div>
<input type="hidden" name="zakup" value="karnet"/>
</form>






 


<script>
  document.querySelectorAll('.zalogujBtn').forEach(function(button) {
    button.addEventListener('click', function(event) {
        event.preventDefault();
        window.location.href = '/logowanie';

       });
});

document.getElementById("inputDate").addEventListener("input", updateDate);
var ticketTypeElements = document.getElementsByName("ticketType");

for (var i = 0; i < ticketTypeElements.length; i++) {
    ticketTypeElements[i].addEventListener("change", updateDate);
}

function updateDate() {
    var selectedDate = document.getElementById("inputDate").value;
    var selectedTicketType;

    for (var i = 0; i < ticketTypeElements.length; i++) {
        if (ticketTypeElements[i].checked) {
            selectedTicketType = ticketTypeElements[i].value;
            break;
        }
    }

    var outputDateElement = document.getElementById("outputDate");

    if (selectedDate && selectedTicketType) {
        var newDate;

        if (selectedTicketType == "NORMAL") {
            newDate = new Date(selectedDate);
            newDate.setMonth(newDate.getMonth() + 1);
        } else if (selectedTicketType == "PRO") {
            newDate = new Date(selectedDate);
            newDate.setMonth(newDate.getMonth() + 3);
        } else if (selectedTicketType == "MAX") {
            newDate = new Date(selectedDate);
            newDate.setMonth(newDate.getMonth() + 6);
        }

        var formattedDate = newDate.toLocaleDateString();
        outputDateElement.textContent = "Data wygaśnięcia karnetu: " + formattedDate;
        document.getElementById("inputEndDate").setAttribute('value',newDate.toISOString().slice(0, 10));
    } else {
        outputDateElement.textContent = "Wybierz datę i rodzaj karnetu.";
    }
}
</script>


{%endblock%}